<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Notes</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>Notes</h1>
      <h2>Mutable attributes on inherited types</h2>

<p>When you inherit an attribute from a type, the type&#39;s attributes are not copied, just pointed to. For most attribute types there&#39;s no problem with this, but lists and dictionaries are mutable - i.e. they can be changed by commands such as <a href="scripts/list_add.html">list add</a>, but you&#39;re still pointing to the same list.</p>

<p>If type &quot;MyType&quot; has a list attribute &quot;TypeList&quot;, and object &quot;MyObject&quot; inherits from MyType, then we potentially have a problem if we call &quot;list add (MyObject.TypeList, value)&quot;, as we would then change the list on the underlying type - affecting all other objects that inherit from it.</p>

<p>To prevent this, mutable attributes which are defined on types are <em>locked</em>. If you try to call the &quot;list add&quot; command in the example above, an error will be raised.</p>

<p>You can get around the problem by cloning the list or dictionary first. Quest automatically clones on assignment. This means you can write objectA.list = objectB.list, and objectA actually gets a <em>clone</em> of objectB&#39;s list, so you can change objectA&#39;s list without affecting objectB.</p>

<p>The same principle works for cloning an attribute defined on an underlying type - in our example above, we can clone the TypeList attribute first using this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">MyObject.TypeList = MyObject.TypeList
</code></pre></div>
<p>Yep, it looks like assigning to the same thing. But we&#39;ve made use of the fact that assignment clones mutable types to give MyObject an editable version of TypeList.</p>

    </div>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Conversations</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>Conversations</h1>
      <h3>Introduction</h3>

<p>Conversations are a thorny subject in interactive fiction. There are several ways to present them to the player and none are accepted as &quot;the&quot; way to do it, or acknowledged as the best.</p>

<p>Broadly, your options are:</p>

<ul>
<li>  Player initiates the conversation and gets a stock response from that character</li>
<li>  Player initiates the conversation and gets to choose a subject from a menu of options for that character</li>
<li>  Player initiates the conversation, with a topic of his choosing</li>
</ul>

<p>For a more comprehesive discussion on your options, you might like to read this article:</p>

<p><a href="http://emshort.wordpress.com/how-to-play/writing-if/my-articles/conversation/">http://emshort.wordpress.com/how-to-play/writing-if/my-articles/conversation/</a></p>

<p>You should also consider whether you want both sides of the conversation in the output. Which you chose is up to you, but it will look better if you are consistent, so I suggest decided now, before you start typing.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &gt;TALK TO BORIS
  &#39;Hi,&#39; you say to Boris, &#39;can you help me find the key to this door?&#39;
  &#39;Sure, you need to look in the bedroom.&#39;

  &gt;TALK TO BORIS
  &#39;Hi,&#39; says Boris, &#39;do you need to find the key to this door? You need to look in the bedroom.&#39;
</code></pre></div>
<h3>Stock responses</h3>

<p>The examples above illustrate this in play.</p>

<p>To set this up in Quest, select the character, go to the verbs tab, and add a new verb, &quot;speak&quot; (Quest will match this up to the right command as you type). Then put in the response underneath. It could look like this:</p>

<p><img src="Talk1.png" alt="" title="Talk1.png"></p>

<h3>Menu of responses</h3>

<p>In play this might look like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &gt;TALK TO BORIS
  1. Where is key
  2. Who is the Queen
  3. How do I defeat the troll
  &gt;1
  &#39;Hi,&#39; you say to Boris, &#39;can you help me find the key to this door?&#39;
  &#39;Sure, you need to look in the bedroom.&#39;
</code></pre></div>
<p>Quest handles menus well, and it would actually look rather more slick than that, though some people might find a pop-up menu jarring even so.</p>

<p>As this is again using the &quot;TALK TO&quot; command, setting it up is like the first option. However, the script for that &quot;SPEAK&quot; verb is rather more complicated.</p>

<p><img src="Talk2.png" alt="" title="Talk2.png"></p>

<p>In code view, it looks like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">      &lt;speak type=&quot;script&quot;&gt;
        topics = Split (&quot;Where is key;Who is the Queen;How do I defeat the troll&quot;, &quot;;&quot;)
        show menu (&quot;Talk to Fred about...&quot;, topics, true) {
          switch (result) {
            case (&quot;Where is key&quot;) {
              msg (&quot;&#39;You need to look in the bedroom.&#39;&quot;)
            }
            case (&quot;Who is the Queen&quot;) {
              msg (&quot;&#39;Just some girl.&#39;&quot;)
            }
            case (&quot;How do I defeat the troll&quot;) {
              msg (&quot;&#39;Use fire to stop it regenerating.&#39;&quot;)
            }
          }
        }
      &lt;/speak&gt;
</code></pre></div>
<p>The first line of the script sets up the topics. They need to be a string list, and the easiest way to create one is to use the Split function. Each topic is separated by a semi-colon, with no spaces.</p>

<p>A switch statement is used to decide which response will be seen. Note that the key for each case must be exactly the same as the topic you listed before. The script for each case is set up just as the script for the first option.</p>

<h3>Ask About</h3>

<p>In play this might look like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &gt;ASK BORIS ABOUT KEY
  &#39;Hi,&#39; you say to Boris, &#39;can you help me find the key to this door?&#39;
  &#39;Sure, you need to look in the bedroom.&#39;
</code></pre></div>
<p>This is the most open-ended approach, though in reality that flexibility is an illusion - the player is limited to asking about only the topics you have included, he just does not know it. This is also the major downfall of this method - the player might not guess the subjects you have coded for, and just get frustrated as the character fails to respond to guess after guess. This system is probably best suited to when you have a large number of topics you will include for every character in the game, as a menu will soon get unwieldly, and thematically, it feels righyt for a mystery.</p>

<p>Quest has a tab just for Ask/Tell, making it easy to set up each response.</p>

<p><img src="Talk3.png" alt="" title="Talk3.png"></p>

<p>For each topic, click on add, then put in the topic name. You can put in several; try to guess what words the player will use. They should be separated by spaces, as shown above. Then you need to put in the script, just as before.</p>

<p>You should also put in a script to run for unknown topics.</p>

<h3>Varying Responses</h3>

<p>In all the above examples, the character will respond the same every time. That is not ideal, people are not like that, they will get annoyed if you ask the same question fifteen times, and wonder why you are asking where the key is when you have just used it to open the door.</p>

<p>For all the methods above, the important part here is the lines that start &quot;msg&quot;. We have gone through the three ways to arrive at them, now we are concentrating on just those lines.</p>

<p>If you have a counter in there, then you could have the response depend on how often the topic has been raised (but remember to set up an integer attribute for the counter). Or use a boolean to flag that the topic has been asked (the version below automatically sets the attribute for you).</p>

<p>Instead of:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    msg (&quot;&#39;Hi,&#39; you say to Philippa, &#39;can you help me find the key to this door?&#39;&quot;)
    msg (&quot;&#39;Sure, you need to look in the bedroom.&#39;&quot;)
</code></pre></div>
<p>Try:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    if (not GetBoolean (philipa, &quot;key_asked&quot;) {
      msg (&quot;&#39;Hi,&#39; you say to Philippa, &#39;can you help me find the key to this door?&#39;&quot;)
      msg (&quot;&#39;Sure, you need to look in the bedroom.&#39;&quot;)
      philipa.key_asked = true
    }
    else {
      msg (&quot;&#39;Hi again,&#39; you say to Philippa, &#39;can you help me find the key to this door?&#39;&quot;)
      msg (&quot;&#39;Have you tried looking in the bedroom?&#39;&quot;)
    }
</code></pre></div>
<p>Or it could respond to changes in the world. The code below will make Philippa respond differently if the door is unlocked, or you are carrying the key.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    if (not that_door.locked) {
      msg (&quot;&#39;I see you finally managed to unlock the door then,&#39; said Philippa sarcastically.&#39;&quot;)
    }
    else if (key.parent = player) {
      msg (&quot;&#39;You found the key then,&#39; said Philippa sarcastically.&#39;&quot;)
    }
    else if (not GetBoolean (philippa, &quot;key_asked&quot;)) {
      msg (&quot;&#39;Hi,&#39; you say to Philippa, &#39;can you help me find the key to this door?&#39;&quot;)
      msg (&quot;&#39;Sure, you need to look in the bedroom.&#39;&quot;)
      philippa.key_asked = true
    }
    else {
      msg (&quot;&#39;Hi again,&#39; you say to Philippa, &#39;can you help me find the key to this door?&#39;&quot;)
      msg (&quot;&#39;Have you tried looking in the bedroom yet?&#39;&quot;)
    }
</code></pre></div>
<h3>Working Examples</h3>

<p>This very simple game has all three options working (right click and save to your computer).</p>

<p><a href="http://quest5.net/downloads/ConvTutorial.aslx">ConvTutorial.aslx</a></p>

<h3>Dynamic Menus</h3>

<p>An alternative to the second method is to use <a href="dynamic_menus_for_conversations.html">Dynamic Menus for Conversations</a>; that is, the menu for a character changes over the course of the game. For example, once the player has the key, the menu choice &quot;Where is key&quot; is no longer displayed.</p>

    </div>
  </body>
</html>

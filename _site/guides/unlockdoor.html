<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Unlockdoor</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>Unlockdoor</h1>
      <p>Here is an example of an exit, which will be unlocked when the player inserts the right code:</p>

<p>After creating an exit set the &quot;Locked&quot;-checkbox and the &quot;Print message when locked&quot;. To unlock the exit later by script you must enter a name for your exit!</p>

<p><img src="Unlockdoor1.jpg" alt="" title="Unlockdoor1.jpg"></p>

<p>Then add a keypad object to your room. Go to the Use/Give tab and add a script when using the keypad on its own. This script is executed if the player types &quot;use keypad&quot;. The player is asked to input the key and then the input is checked with an if-clause. If it is correct, the locked exit is unlocked.</p>

<p><img src="Unlockdoor2.jpg" alt="" title="Unlockdoor2.jpg"></p>

<h2>Random Code</h2>

<p>So now some wise guy has pasted the code on the internet, and everyone knows how to open the door already, without having to play part of your game. What we need is a code randomly generated each time the game is played.</p>

<p>So, firstly we need that random code. Click on the game object, then on the &quot;Script&quot; tab. The top half is for a script to run when the game starts, which is what we want. All it has to do is assign a random number to game.code (i.e., the code attribute of the game object). GetRandomInt is a function that creates random numbers, so here is the code:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    &lt;start type=&quot;script&quot;&gt;
      game.code = GetRandomInt (1000, 9999)
    &lt;/start&gt;
</code></pre></div>
<p>If you prefer to use the GUI, it will look like this:</p>

<p><img src="randomcode1.png" alt="" title="randomcode1.png"></p>

<p>This gives a random number between 1000 and 9999. Use those numbers to ensure we get a four digit code.</p>

<p>The second part is to modify the exit to use the random code. In code mode, it will look like this now:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">      &lt;use type=&quot;script&quot;&gt;
        msg (&quot;Please enter security code:&quot;)
        get input {
          if (result=game.code) {
            UnlockExit (room_to_room2)
            msg (&quot;The exit to the second room is unlocked now.&quot;)
          }
          else {
            msg (&quot;Nothing happens. The code seems to be wrong.&quot;)
          }
        }
      &lt;/use&gt;
</code></pre></div>
<p>The only difference is in the fourth line, where code is compared to game.code instead of &quot;1234&quot;. If you prefer to use the GUI, it will look like this:</p>

<p><img src="randomcode2.png" alt="" title="randomcode2.png"></p>

<p>The only difference here is that code=&quot;1234&quot; is now code=game.code.</p>

<p>One last thing - you need a way to tell the player what the code is. Something somewhere has to do something like this:</p>

<p>msg (&quot;The code is &quot; + game.code + &quot;.&quot;)</p>

<p>In the GUI, it might look like this:</p>

<p><img src="randomcode3.png" alt="" title="randomcode3.png"></p>

<p>Note that it is going to print an expression, and in that expression the plain text is in double quotes, the code is game.code, as before, and it is all joined together with + signs.</p>

    </div>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Modifying the UI (Advanced)</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>Modifying the UI (Advanced)</h1>
      <p>As of Quest 5.3, there is a lot you can do to customise the player&#39;s user interface (UI).</p>

<p>Look at the &quot;Display&quot; tab of the <em>game</em> object to see how to set a font and basic colours, including hyperlinks and hyperlink menus. You can also turn off the panes on the right here. On the &quot;Room Descriptions&quot; tab you can also turn off hyperlinks in the text. What if you want to do more? Well, you can modify the entire colour scheme if you want, though it is a little more complicated.</p>

<p>This screenshot is from the example game listed at the end of this page to give an idea of what is possible.</p>

<p><img src="Styles5.png" alt="" title="Styles5.png"></p>

<p>The Quest UI is HTML, just like any web page, and this means you can change the style of each component. If you are playing a Quest game, try right-clicking on it; you will see an option &quot;view source&quot;. Select it and you will see the HTML code used to create what you can see. It will help if you know a little HTML and CSS at this point...</p>

<h2>HTML</h2>

<p>HTML is a kind of computer language that tells a browser how to display a page. It uses <em>tags</em> to denote <em>mark-up</em>, and these tags give instructions on the style to use. Here is a simple example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  This sentence uses &amp;lt;i&gt;italic&amp;lt;/i&gt; text.
</code></pre></div>
<p>The word &quot;italic&quot; will be displayed in italic. As you can see, tags start with a <em>less than</em> symbol, and end with a <em>greater than</em> symbols (also know as angle brackets). You need tags at the start and the end, and the end tag also needs a slash. The &quot;i&quot; indicates italics. The start tag, the end tag and the text between are known as an element, so in the example we have an italic element.</p>

<p>The basic HTML document is a declaration and an &quot;html&quot; element, and the &quot;html&quot; element contains a &quot;head&quot; element, and a &quot;body&quot; element&quot;, and they in turn contain other elements. Something like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;
  ...
  &lt;/head&gt;
  &lt;body&gt;
  ...
  &lt;/body&gt;&lt;/html&gt;
</code></pre></div>
<p>The head element contains JavaScript code, which we can ignore completely. The body element contains the actual content, and we need to pick out from that the various elements displayed on the screen.</p>

<h2>CSS</h2>

<p>CSS is the way to control how an HTML element is displayed. By default, the italic element causes text to be displayed in italics, but using CSS you can change that. In practice it is better not to, instead, we commonly use <em>div</em> and <em>span</em> elements instead, as it is less confusing, and change them. The <em>div</em> element is used for blocks of text, the &#39;&#39;span&#39; element for sections of text within a paragraph. So to put text in italics using CSS, first define the CSS like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  span {
    font-style: italic;
  }
</code></pre></div>
<p>Then use it like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  This sentence uses &amp;lt;span&gt;italic&amp;lt;/span&gt; text.
</code></pre></div>
<p>That will make all the span elements display as italic. You might want just some to, so you give the span element a class or id (an id is used for a specific span; there can only be one element with that id).</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  .bld {
    font-style: bold;
  }
  #ital {
    font-style: italic;
  }
</code></pre></div>
<p>Then use it like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  This sentence uses &amp;lt;span id=&quot;ital&quot;&gt;italic&lt;/span&gt; and &amp;lt;span class=&quot;bld&quot;&gt;bold&lt;/span&gt;text.
</code></pre></div>
<p>Note that a class name uses a dot, and an id uses a hash in the CSS. After the element name, you need a pair of curly braces to enclose the style information. The styles are defined by the name of the attribute, a colon, the value to assign to it, and a semi-colon.</p>

<h2>Insert HTML</h2>

<p>If you look at the Quest source HTML, you will see a huge number of HTML elements with class or id set on them. All we need to do is work out which we want to modify, and change it.</p>

<p>The way to change it is to insert our CSS styles into the HTML code. To do that, we first need to create our own HTML file, inside the same folder as your game. We can call it test.html (but you can give it any name, as long as it ends .html). It should look like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
  &lt;style type=&quot;text/css&quot;&gt;
    body {
      background-color: blue;
    }
  &lt;/style&gt;
  &lt;/head&gt;
  &lt;/html&gt;
</code></pre></div>
<p>All this will do is to change background colour of the body element to be blue. You now need to tell Quest to use the file, and that is done through a startup script. Set it up like this:</p>

<p><img src="Styles2.png" alt="" title="Styles2.png"></p>

<p>Or in code view:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    &lt;start type=&quot;script&quot;&gt;
      insert (&quot;test.html&quot;)
    &lt;/start&gt;
</code></pre></div>
<p>Play the game, and you should see a blue background (if you cannot make sure your Quest window is wide enough to see the edges).</p>

<p>You can experiment with different colours, a full list of those available can be found <a href="http://en.wikipedia.org/wiki/Web_colors">here</a>.</p>

<p>You can also the standard HTML notation, so #0000FF for blue, for example.</p>

<h2>Changing Other Elements</h2>

<p>You can potentially change the colour of all sorts of thing in the UI, you just need to know the element name, class or id. Here are some examples:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  #location: This is the title bar at the top that has the room name in it.
  #gameContent: Where the text goes, including the input box.
  #divOutput: Inside gameContent, where the text goes, but excluding the input box,
  #txtCommand: The input box.
  .ui-widget: Border around each pane on the right
  #gamePanesFinished: This is the pane on the right shown when the game ends
  #msgbox, #msgboxCaption: For pop-ups.
  #dialog, #dialogCaption, #dialogOptions: For menu pop-ups.
</code></pre></div>
<p>As well as the background, you can set foreground colour (with the <em>color</em> attribute) and font too, among other things.</p>

<p>To remove the focus box on the input box, do this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  *:focus {
    outline: none;
  }
</code></pre></div>
<h2>Notes</h2>

<p>Be aware that HTML and CSS spell colour as &quot;color&quot;.</p>

<p>Be careful what fonts you specify. If you use a web font in Quest, then you can be pretty sure that that one is on the players computer (I do not know how to get Quest to download more than one web font, though I imagine it is possible). There is no guarantee that any other font will be available; even a basic font like <em>Arial</em> is not on an Apple Mac, where it is called in <em>Helvetica</em>. You can, however, specify a list of fonts, and Quest will use the first one that is available (see, for example, <a href="http://www.w3schools.com/cssref/css_websafe_fonts.asp">here</a>.</p>

<p>The rounded input box in the image about was achieved using the border-radius attribute. Unfortunately, this does not work on the box containing the input box and output text, I think because other parts of the display are covering it up, and only the bottom left corner is rounded.</p>

<p>Although you can use background images in HTML/CSS, this is not readily feasible in Quest through JavaScipt, because of the way the interface references other files (i.e., the image file). If you want a background image (round the outside only), set it in the Quest UI, and make sure the <em>body</em> element is not changed. You can set other components to be transparent so the background shows through. That said, the <em>status</em> component (at the top, where the room name appears) adopts a blue wave image as its background when transparent, and the only way to get rid of it is to set the <em>status</em> component&#39;s <em>display</em> attribute to <em>none</em> - which means the room name is not then displayed.</p>

<h2>Using JavaScript</h2>

<p>Certain attributes seem to be hard coded in, such as the background colour for <em>gameBorder</em> and <em>gamePanes</em>, and the alignment of the output text. What we can do, however, is run a JavaScript function to override those settings.</p>

<p>JavaScript goes in its own file, let us call it test.js. Here is some example text to put in it.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  function setUI(){ 
    document.getElementById(&quot;gameBorder&quot;).setAttribute(&quot;style&quot; , &quot;background: red;&quot;);
    document.getElementById(&quot;gamePanes&quot;).setAttribute(&quot;style&quot; , &quot;background: yellow;&quot;);
  }
</code></pre></div>
<p>In your game, you need to tell quest to load that file:</p>

<p><img src="Styles3.png" alt="" title="Styles3.png"></p>

<p>Or in code:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &lt;javascript src=&quot;test.js&quot; /&gt;
</code></pre></div>
<p>Then you need to invoke the JavaScript function in your start-up script:</p>

<p><img src="Styles4.png" alt="" title="Styles4.png"></p>

<p>Or in code:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  request (RunScript, &quot;setUI&quot;)
</code></pre></div>
<p>So hopefully you now see big blocks of red and yellow in your game.</p>

<p>Let us see that JavaScript in detail now. Here is a slightly more advanced example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  function setUI(){ 
    document.getElementById(&quot;gameBorder&quot;).setAttribute(&quot;style&quot; , &quot;background: blue; border: blue;&quot;);
    document.getElementById(&quot;gamePanes&quot;).setAttribute(&quot;style&quot; , &quot;background: blue;&quot;);
  }
</code></pre></div>
<p>The two important lines in the middle change two different HTML elements, <em>gameBorder</em> and <em>gamePanes</em>. Note that this technique will only work for elements with an id (you can use JavaScript to change other elements, but it gets complicated, and well beyond this discussion). For those elements we are modifying the style, and the bit in quotes at the end is what you want to change. This is in the same format as the CSS inside the curly braces earlier. You can put in as much style information in there as you want; you can see the first changes the background and the border.</p>

<p>This line of JavaScript will change the prompt:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  document.getElementById(&quot;txtCommand&quot;).setAttribute(&quot;placeholder&quot;, &quot;So now what?&quot;);
</code></pre></div>
<p>Note that while the HTML/CSS method adds style information to an element, the JavaScript method replaces the existing style information. If we do this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    document.getElementById(&quot;gameBorder&quot;).setAttribute(&quot;style&quot; , &quot;background: blue;&quot;);
    document.getElementById(&quot;gameBorder&quot;).setAttribute(&quot;style&quot; , &quot;border: blue;&quot;);
</code></pre></div>
<p>... then the first instruction gets overwritten by the second, and will have no effect.</p>

<h2>Changing on the Fly</h2>

<p>You can call a JavaScript function at any point in the game, which means you can change the UI colour scheme as many times as you want during the course of play. I do suggest some restraint though!</p>

<p>Here is a full example. You will need to copy and paste the code into their respective files (this Wiki does not allow these file types to be uploaded). This is the <em>colors.js</em> file content. The function <em>setUI</em> is called from Quest, and accepts four parameters; this then calls the other functions to set all the style attributes.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  function setUI(font, panel, back, text){ 
    setComponentBackground(panel);
    setBackground(back);
    setLocation(panel, font);
    setInput(panel, font, 14);
    setPanes(text, font, 14);
  }
  function setBackground(c){ 
    document.getElementById(&quot;location&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; border: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;gameBorder&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; border: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;gamePanes&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;status&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; border: darkblue; &quot;);
    document.getElementById(&quot;gamePanesRunning&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; border: none; &quot;);
    document.body.setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; &quot;);
  }
  function setComponentBackground(c){ 
    document.getElementById(&quot;gameContent&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;gamePanel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;gridPanel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;; &quot;);
    document.getElementById(&quot;divOutput&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;;&quot;);
    document.getElementById(&quot;inventoryLabel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;;&quot;);
    document.getElementById(&quot;statusVarsLabel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;;&quot;);
    document.getElementById(&quot;placesObjectsLabel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;;&quot;);
    document.getElementById(&quot;compassLabel&quot;).setAttribute(&quot;style&quot; , &quot;background: &quot; + c + &quot;;&quot;);
  }
  function setLocation(c, font, size){ 
    document.getElementById(&quot;location&quot;).setAttribute(&quot;style&quot; , &quot;font-family: &quot; + font + &quot;; font-size: 18px; color: &quot; + c + &quot;; padding: 1px; &quot;);
  }
  function setInput(c, font, size){ 
    document.getElementById(&quot;txtCommand&quot;).setAttribute(&quot;style&quot; , &quot;font-family: &quot; + font + &quot;; font-size: &quot; + size + &quot;px; color: &quot; + c + &quot;; padding: 3px; border-radius: 15px; &quot;);
  }
  function setPanes(c, font, size){ 
    var s = &quot;font-family: &quot; + font + &quot;; font-size: &quot; + size + &quot;px; color: &quot; + c + &quot;; &quot;
    document.getElementById(&quot;lstInventory&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;lstPlacesObjects&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;statusVars&quot;).setAttribute(&quot;style&quot; , s);
    for (var i = 1; i &lt; 10; i++) {
      document.getElementById(&quot;cmdPlacesObjects&quot;+i).setAttribute(&quot;style&quot; , s);
      document.getElementById(&quot;cmdInventory&quot;+i).setAttribute(&quot;style&quot; , s);
    }
    s = &quot;font-family: &quot; + font + &quot;; font-size: &quot; + size + &quot;px; color: white; &quot;
    document.getElementById(&quot;cmdCompassIn&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;cmdCompassOut&quot;).setAttribute(&quot;style&quot; , s);
    s = document.getElementById(&quot;inventoryLabel&quot;).getAttribute(&quot;style&quot;) + &quot; font-family: &quot; + font + &quot;; font-size: &quot; + size + &quot;px;&quot;;
    document.getElementById(&quot;inventoryLabel&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;statusVarsLabel&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;placesObjectsLabel&quot;).setAttribute(&quot;style&quot; , s);
    document.getElementById(&quot;compassLabel&quot;).setAttribute(&quot;style&quot; , s);
  }
</code></pre></div>
<p>The HTML file, <em>nofocus.html</em>. All the wok is done in the JavaScript file; the only thing I could not work out how to do there was to stop the border on the input box when it has the focus.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
   &lt;style type=&quot;text/css&quot;&gt;
  *:focus {
      outline: none;
  }
  &lt;/style&gt;
  &lt;/head&gt;
  &lt;/html&gt;
</code></pre></div>
<p>And the Quest game code. You can use this to experiment with different colour schemes of your own. If you do not want hanging colour schemes, you just need to copy the startup script and the JavaScript import (the lines in bold) into your own game.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  &lt;!--Saved by Quest 5.3.4750.31396--&gt;
  &lt;asl version=&quot;530&quot;&gt;
    &lt;include ref=&quot;English.aslx&quot; /&gt;
    &lt;include ref=&quot;Core.aslx&quot; /&gt;
    &lt;game name=&quot;test&quot;&gt;
      &lt;gameid&gt;39fea4b4-586a-4c72-9404-501f5f3a0c18&lt;/gameid&gt;
      &lt;version&gt;1.0&lt;/version&gt;
      &lt;firstpublished&gt;2012&lt;/firstpublished&gt;
      &lt;defaultwebfont&gt;Calligraffitti&lt;/defaultwebfont&gt;
      &lt;defaultfontsize type=&quot;int&quot;&gt;12&lt;/defaultfontsize&gt;
      &lt;defaultfont&gt;&#39;Arial Black&#39;, Gadget, sans-serif&lt;/defaultfont&gt;
      &lt;showscore /&gt;
      &lt;showhealth /&gt;
      &lt;showpanes /&gt;
      &lt;setbackgroundopacity type=&quot;boolean&quot;&gt;false&lt;/setbackgroundopacity&gt;
      &lt;defaultbackground&gt;Silver&lt;/defaultbackground&gt;
      &lt;defaultlinkforeground&gt;LightPink&lt;/defaultlinkforeground&gt;
      &lt;echohyperlinks type=&quot;boolean&quot;&gt;false&lt;/echohyperlinks&gt;
      &lt;enablehyperlinks type=&quot;boolean&quot;&gt;false&lt;/enablehyperlinks&gt;
      &#39;&#39;&#39;&lt;start type=&quot;script&quot;&gt;&#39;&#39;&#39;
        &#39;&#39;&#39;insert (&quot;nofocus.html&quot;)&#39;&#39;&#39;
        &#39;&#39;&#39;request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;LightSteelBlue;DarkSlateGrey;DarkSlateGrey&quot;)&#39;&#39;&#39;
      &#39;&#39;&#39;&lt;/start&gt;&#39;&#39;&#39;
    &lt;/game&gt;
    &lt;object name=&quot;room&quot;&gt;
      &lt;inherit name=&quot;editor_room&quot; /&gt;
      &lt;description&gt;The first room of the game. Type a colour to change the UI.&lt;/description&gt;
      &lt;alias&gt;First Room&lt;/alias&gt;
      &lt;object name=&quot;player&quot;&gt;
        &lt;inherit name=&quot;editor_object&quot; /&gt;
        &lt;inherit name=&quot;editor_player&quot; /&gt;
        &lt;object name=&quot;aaa&quot;&gt;
          &lt;inherit name=&quot;editor_object&quot; /&gt;
          &lt;use /&gt;
        &lt;/object&gt;
      &lt;/object&gt;
      &lt;object name=&quot;ppp&quot;&gt;
        &lt;inherit name=&quot;editor_object&quot; /&gt;
      &lt;/object&gt;
      &lt;object name=&quot;ooo&quot;&gt;
        &lt;inherit name=&quot;editor_object&quot; /&gt;
      &lt;/object&gt;
      &lt;exit alias=&quot;east&quot; to=&quot;room2&quot;&gt;
        &lt;inherit name=&quot;eastdirection&quot; /&gt;
      &lt;/exit&gt;
    &lt;/object&gt;
    &lt;object name=&quot;room2&quot;&gt;
      &lt;inherit name=&quot;editor_room&quot; /&gt;
      &lt;description&gt;The second room&lt;/description&gt;
      &lt;alias&gt;Room 2&lt;/alias&gt;
      &lt;exit alias=&quot;west&quot; to=&quot;room&quot;&gt;
        &lt;inherit name=&quot;westdirection&quot; /&gt;
      &lt;/exit&gt;
    &lt;/object&gt;
    &lt;command name=&quot;blue&quot;&gt;
      &lt;pattern&gt;blue&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;LightSteelBlue;DarkSlateGrey;DarkSlateGrey&quot;)
        msg (&quot;I&#39;m feelin&#39; blue...&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;yellow&quot;&gt;
      &lt;pattern&gt;yellow&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;LemonChiffon;Khaki;Tan&quot;)
        msg (&quot;Ah, mellow yellow&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;green&quot;&gt;
      &lt;pattern&gt;green&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;SpringGreen;DarkOliveGreen;DarkOliveGreen&quot;)
        msg (&quot;Hey, everything green, man!&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;red&quot;&gt;
      &lt;pattern&gt;red&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;Salmon;DarkRed;DarkRed&quot;)
        msg (&quot;It&#39;s all red&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;white&quot;&gt;
      &lt;pattern&gt;white&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;WhiteSmoke;AntiqueWhite;Tan&quot;)
        msg (&quot;It&#39;s so bright&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;black&quot;&gt;
      &lt;pattern&gt;black&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;Indigo;Black;Indigo&quot;)
        msg (&quot;It&#39;s all dark&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &lt;command name=&quot;gray&quot;&gt;
      &lt;pattern&gt;gray;grey&lt;/pattern&gt;
      &lt;script&gt;
        request (RunScript, &quot;setUI;&quot; + game.defaultwebfont + &quot;;LightSlateGray;DarkSlateGray;SteelBlue&quot;)
        msg (&quot;It&#39;s all so boring&quot;)
      &lt;/script&gt;
    &lt;/command&gt;
    &#39;&#39;&#39;&lt;javascript src=&quot;colours.js&quot; /&gt;&#39;&#39;&#39;
  &lt;/asl&gt;
</code></pre></div>
<p>Play the game and type some colours at the prompt!</p>

    </div>
  </body>
</html>

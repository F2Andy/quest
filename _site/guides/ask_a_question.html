<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ask a question</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>Ask a question</h1>
      <p>Often in a text adventure you want the game to ask an open-ended question of the player - the answer to a riddle, perhaps. The &quot;get input&quot; script command exists to handle just that. Here is a script:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  msg (&quot;&#39;Hello. Can you answer my riddle? What walks on four legs in the morning, two in the afternoon, and three in the evening?&#39;&quot;)
  get input {
    if (result = &quot;man&quot;) {
      msg (&quot;&#39;Is it a man?&#39; you ask.&quot;)
      msg (&quot;&#39;How come everyone knows the answer?&#39;&quot;)
      msg (&quot;&#39;We have this thing called the internet nowadays...&#39;&quot;)
    }
    else {
      msg (&quot;&#39;Is it \&quot;&quot; + result + &quot;\&quot;?&#39; you ask.&quot;)
      msg (&quot;&#39;No!&#39;&quot;)
    }
  }
</code></pre></div>
<p>The first line just asks the riddle. Then we see the &quot;get input&quot; command. The block after that gets run only once the player has typed a response. a magic variable called <em>result</em> has the text the player typed, so we just need to check it is the correct answer and react accordingly.</p>

<p>This will work, but has a couple of issues that we can handle.</p>

<h2>Testing Input</h2>

<p>The first problem is that the player has to type the exact string &quot;man&quot;. What if he types &quot;Man&quot; or &quot;a man&quot;? We might also like to handle &quot;woman&quot; and &quot;human&quot; so the riddle is more politically correct.</p>

<p>To do this, replace the third line with this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  if (IsRegexMatch  (&quot;man&quot;, LCase (result))) {
</code></pre></div>
<p>The LCase function will convert the players text to all lower case, so &quot;Man&quot; will be handled as &quot;man&quot;. This text will then be matched against a Regex (a pattern) rather than a specific string. As long as the player has &quot;man&quot; somewhere in the answer, the pattern will match.</p>

<p>In this case, that will match human and woman too, which is great. Usually multiple answers are not so convenient, but you can do that too - just put them inside brackets and separate each with a vertical bar.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  if (IsRegexMatch  (&quot;(man|lady)&quot;, LCase (result))) {
</code></pre></div>
<p>There is more on <a href="pattern_matching.html">Pattern Matching</a> elsewhere.</p>

<h2>Changing the Prompt</h2>

<p>This is a little more complicated (and really only possible if you are using Quest offline), but is worthwhile as it makes it clear to the player that he or she should not be typing a command. To get this to work, you need to use some JavaScript! We will go though it step by step.</p>

<p>Create a new text file (say with Notepad), called &quot;functions.js&quot;, and past this into it:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  function setPrompt(s) {
    document.getElementById(&quot;txtCommand&quot;).setAttribute(&quot;placeholder&quot;, s);
  }
</code></pre></div>
<p>After you save it, check the file really is called &quot;functions.js&quot;, and not &quot;functions.js.txt&quot; (Windows has a habit of doing that).</p>

<p>In Quest, open up the &quot;Advanced&quot; node, right at the bottom in the right pane. click on &quot;Javascrpt&quot;. In the left pane, click &quot;Add&quot;. You should find &quot;functions.js&quot; in the Filename dropdown, otherwise just browse to it (if you cannot find it, it probably has that .txt extension, and you will need to rename it). If all goes well, you should see the code above appear.</p>

<p>Now modify your script to this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  msg (&quot;&#39;Hello. Can you answer my riddle? What walks on four legs in the morning, two in the afternoon, and three in the evening?&#39;&quot;)
  request (RunScript, &quot;setPrompt;Your answer?&quot;)
  get input {
    if (IsRegexMatch  (&quot;(man|lady)&quot;, LCase (result))) {
      msg (&quot;&#39;Is it a man?&#39; you ask.&quot;)
      msg (&quot;&#39;How come everyone knows the answer?&#39;&quot;)
      msg (&quot;&#39;We have this thing called the internet nowadays...&#39;&quot;)
    }
    else {
       msg (&quot;&#39;Is it \&quot;&quot; + result + &quot;\&quot;?&#39; you ask.&quot;)
       msg (&quot;&#39;No!&#39;&quot;)
     }
   request (RunScript, &quot;setPrompt;Type here...&quot;)
 }
</code></pre></div>
<p>The new bits are those two lines that start &quot;request&quot;. They run the JavaScript in the file, calling a function called &quot;setPrompt&quot;, and sending a new prompt string.</p>

    </div>
  </body>
</html>

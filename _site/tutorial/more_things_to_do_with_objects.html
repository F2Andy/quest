<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>More things to do with objects</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <h1>More things to do with objects</h1>
      <h2>Giving and Using objects</h2>

<p>After a player has taken an object, they can give that object to, or use it on, other objects in the game.</p>

<p>For example, after picking up some flowers, a player can give them to a character called &quot;Susan&quot; by typing &quot;give flowers to susan&quot;.</p>

<p>&quot;Give&quot; and &quot;Use&quot; are set up in exactly the same way â€“ the only difference is whether the player types &quot;give ... to ...&quot; or &quot;use ... on ...&quot;.</p>

<p>In this example, we are going to revive the corpse of Bob in the lounge, using a <a href="http://en.wikipedia.org/wiki/Defibrillation">heart defibrillator</a>. First, we need to alter the setup of Bob so that we give a correct description whether he is dead or alive. To do this, we are going to use an <strong>object flag</strong>.</p>

<p>An object flag is simply a way of accessing a boolean attribute of an object (a boolean attribute is simply one that can only be either &quot;true&quot; or &quot;false&quot;). You can use it to mark certain things as &quot;done&quot; - in this case, using the defibrillator on Bob is going to add a flag called &quot;alive&quot; to Bob. So in the &quot;look at&quot; description, we&#39;ll check whether Bob has his &quot;alive&quot; flag set. If so, we&#39;ll print &quot;Bob is sitting up, appearing to feel somewhat under the weather&quot;, and if not, we&#39;ll print the old description &quot;Bob is lying on the floor, a lot more still than usual.&quot;</p>

<h2>Updating the description</h2>

<p>Getting the correct description to display is very similar to the &quot;watch&quot; example in the <a href="using_scripts.html">Using scripts</a> section.</p>

<p>Change Bob&#39;s &quot;look at&quot; description to &quot;Run script&quot;, and add an &quot;if&quot; command.</p>

<p>For the expression, choose &quot;object has flag&quot;. Then select &quot;Bob&quot; and enter the flag name &quot;alive&quot;. Add the descriptions above for &quot;then&quot; and &quot;else&quot; messages.</p>

<p><img src="Use1.png" alt="" title="Use1.png"></p>

<h2>Using the defibrillator</h2>

<p>Now, add a &quot;defibrillator&quot; object to the lounge. Enter a description like &quot;A heart defibrillator can magically revive a dead person, if all those hospital dramas are to be believed.&quot;</p>

<p>Go to the Inventory tab and tick &quot;Object can be taken&quot;.</p>

<p>Now go back to Bob. On <em>his</em> Use/Give tab, go to the &quot;Use (other object) on this&quot; section and choose &quot;Handle objects individually&quot;.</p>

<p><img src="Use2.png" alt="" title="Use2.png"></p>

<p>A list will appear in the &quot;Use&quot; section. Here you can add the objects that can be used on Bob, with a script for each. Click &quot;Add&quot; and type &quot;defibrillator&quot;.</p>

<p>A Script Editor window will now pop up. In this script, we want to print a message to tell the player what&#39;s happening, and also set the &quot;alive&quot; flag on Bob.</p>

<p>So, add a &quot;print a message&quot; script and type something like &quot;Miraculously, the defibrillator lived up to its promise, and Bob is now alive again. He says his head feels kind of fuzzy.&quot;</p>

<p>Now add a &quot;Set object flag&quot; command. Choose Bob from the objects list, and enter the flag name &quot;alive&quot;.</p>

<p><img src="Use3.png" alt="" title="Use3.png"></p>

<p>Close the Script Editor window. Now run the game. Look at Bob, then type &quot;use defibrillator on bob&quot;, then look at Bob again. Verify that you see the correct text in each case.</p>

<p>Notice what happens when you type &quot;use defibrillator on bob&quot; a second time - you get the same response again. You should know how to fix this now - update your &quot;use defibrillator on bob&quot; script to check for the &quot;alive&quot; flag. Update this now.</p>

<h2>Using Functions</h2>

<p>It would be good if we could get the same effect just by typing &quot;use defibrillator&quot;. There are a couple of things we could do here, from the defibrillator Use/Give tab, under &quot;Use (on its own)&quot;:</p>

<ul>
<li>  we can tick &quot;Display menu of objects this can be used on&quot;. This will allow the player to select Bob to use the defibrillator on.</li>
<li>  we can choose &quot;Run script&quot; from the Action list, to automatically defibrillate Bob.</li>
</ul>

<p>The first option is definitely the easiest, but the second option allows us to demonstrate the use of functions.</p>

<p>Of course, we could simply copy the script we created in the section above, and paste it into the defibrillator&#39;s &quot;use this object (on its own)&quot; script. However, if we then wanted to make an update to one script, we would have to update the other one as well.</p>

<p>The best way to resolve this is to make both our existing &quot;use defibrillator on Bob&quot;, and our new &quot;use defibrillator&quot; point to the same script. The way to do this is to set up a <strong>function</strong>.</p>

<p>Functions provide a way for you to set up scripts that can be called from anywhere in your game, so you don&#39;t have to keep copying and pasting or re-entering the script.</p>

<p>Let&#39;s create one now to store the script commands we use to resuscitate Bob. We can then set both &quot;use defibrillator on bob&quot; and &quot;use defibrillator&quot; to call this function.</p>

<p>First, go to Bob&#39;s Use/Give tab, and double click &quot;defibrillator&quot; in the &quot;Use&quot; table to bring up the Script Editor. Hold down the shift key and select all script lines, then click the Cut button to move this script to the clipboard. Now close the window.</p>

<p>Now add a new function (right click the tree, or use the Add menu), and call it &quot;revive bob&quot;. For the script, click the Paste button.</p>

<p><img src="Functionrevive.png" alt="" title="Functionrevive.png"></p>

<p>Now we just need to update &quot;use defibrillator on bob&quot; and create &quot;use defibrillator&quot;, to make them call this function. Go back to Bob&#39;s use/give tab, and double-click to edit the defibrillator script again.</p>

<p>Add a &quot;call function&quot; script, and enter the name &quot;revive bob&quot;. Now close the window.</p>

<p>Now we&#39;re kind of back where we started - if you run the game and type &quot;use defibrillator on bob&quot;, it calls the &quot;revive bob&quot; function and so we get exactly the same behaviour as before.</p>

<p>We just need to make &quot;use defibrillator&quot; call the same function now, so go to the defibrillator&#39;s use/give tab, and in the &quot;use (on its own)&quot; section choose &quot;Run a script&quot;. Add a &quot;call function&quot; script, so that it also calls the &quot;revive bob&quot; function.</p>

<p><img src="Functionrevive2.png" alt="" title="Functionrevive2.png"></p>

<p>Launch the game now and verify you get the same response whether you type &quot;use defibrillator on bob&quot; or just &quot;use defibrillator&quot;.</p>

<p>Note that if you pick up the defibrillator and go to the kitchen, &quot;use defibrillator&quot; will still work. It would be pretty remarkable for a defibrillator to work at such a long range, so consider adding an &quot;if&quot; command to the &quot;revive bob&quot; procedure. You can select &quot;player is in room&quot; from the list of conditions to check whether the player is in the lounge before carrying out the defibrillation. If they&#39;re not in the lounge, print a suitably sarcastic message.</p>

<h2>Giving objects</h2>

<p>Giving an object to a character works in exactly the same way as using objects on a character. Look at the &quot;Give&quot; sections - notice that you get the same options as for &quot;Use&quot;. You can add objects to it in the same way.</p>

<h2>Ask and Tell</h2>

<p>Ask and Tell work in the same way, so we&#39;ll only cover &quot;ask&quot; here.</p>

<p>Click on Bob and go to the &quot;Ask/tell&quot; tab. Here you can add subjects to the list, and give a script for each subject. You can also give a script to run when the player asks Bob about something he doesn&#39;t know about.</p>

<p>Let&#39;s make Bob respond to a question about the massive heart attack he&#39;s just amazingly recovered from. Click the &quot;Add&quot; <img src="Add.png" alt="" title="fig:Add.png"> button and enter some topic keywords, for example &quot;heart attack cardiac arrest&quot;. When the player asks Bob about anything, this list of keywords is checked for matches in the player&#39;s command. So the player could type &quot;ask bob about heart&quot; or &quot;ask bob about cardiac arrest&quot;, and that will match this topic.</p>

<p>A Script Editor will appear. It would make sense that the player can only ask questions of Bob when he&#39;s been brought back to life, so the first thing to do is add an &quot;if&quot; command and check that Bob&#39;s &quot;alive&quot; flag is set. If it is, he can say something like &quot;Well, one moment I was sitting there, feeling pretty happy with myself after eating my afternoon snack - a cheeseburger, pizza and ice cream pie, smothered in bacon, which I&#39;d washed down with a bucket of coffee and six cans of Red Bull - when all of a sudden, I was in terrible pain, and then everything was peaceful. Then you came along.&quot;</p>

<p><img src="Asktell.png" alt="" title="Asktell.png"></p>

    </div>
  </body>
</html>
